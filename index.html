<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Bootstrap 101 Template</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
  <style>
    #output{
      /*min-width: 200px;*/
      min-height: 200px;
      /*width: inherit;*/
      border: 1px solid black;
      margin-bottom: 25px;
      margin-top: 40px;
      /*float: right;*/
    }
  </style>
  <div id="wrapper">
    
    <nav class="navbar navbar-default">
      <div class="container">
        <div class="navbar-brand">Yobit "mirror"</div>
      </div>
    </nav>

    <div class="container">
      <div class="form-group col-md-6">
          <label for="api_key">Enter api key</label>
          <input id="api_key" type="text" class="form-control">
          <label for="api_secret">Enter api secret</label>
          <input id="api_secret" type="text" class="form-control">
        </div>   
    </div>


    <div class="container">
      <div class="trade-block col-md-6">

        <div>
          <!-- Nav tabs -->
          <ul class="nav nav-tabs" role="tablist">
            <li role="presentation" class="active">
              <a href="#buy" aria-controls="buy" role="tab" data-toggle="tab">Buy</a>
            </li>
            <li role="presentation">
              <a href="#sell" aria-controls="sell" role="tab" data-toggle="tab">Sell</a>
            </li>
            <li role="presentation">
              <a href="#check" aria-controls="check" role="tab" data-toggle="tab">Check</a>
            </li>
          </ul>

          <!-- Tab panes -->

          <div class="tab-content">
            <div role="tabpanel" class="tab-pane active" id="buy">
              <h2>Buy</h2>
              <div class="form-group col-md-6">
                <label for="buy_pair">Enter pair</label>
                <input id="buy_pair" type="text" class="form-control"><br>
                <label for="buy_rate">Rate</label>
                <input type="text" id="buy_rate" class="form-control"><br>
                <label for="buy_amount">Amount</label>
                <input type="text" id="buy_amount" class="form-control"><br>
                <input id="buy_btn" type="button" class="btn btn-default" value="Ok">
              </div>
            </div>
            <div role="tabpanel" class="tab-pane" id="sell">
              <h2>Sell</h2>
              <div class="form-group col-md-6">
                <label for="sell_pair">Enter pair</label>
                <input id="sell_pair" type="text" class="form-control"><br>
                <label for="sell_rate">Rate</label>
                <input type="text" id="sell_rate" class="form-control"><br>
                <label for="sell_amount">Amount</label>
                <input type="text" id="sell_amount" class="form-control"><br>
                <input id="sell_btn" type="button" class="btn btn-default" value="Ok">
              </div>
            </div>
            <div role="tabpanel" class="tab-pane" id="check">
              <h2>Check</h2>
              <div class="form-inline col-md-6">
                <label for="check_pair">Enter pair</label>
                <input id="check_pair" type="text" class="form-control">
                <input id="check_btn" type="button" class="btn btn-default" value="Ok">
              </div>
            </div>
          </div>

        </div>
      </div>

      <div class="col-md-6">
        <div id="output"></div>
      </div>

    </div>

    
  </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

    <script>
      $(document).ready(function(){
        // sell_btn
        // buy_btn
        $("#check_btn").click(function(){
          var api_key = $("#api_key").val();
          
          var api_secret = $("#api_secret").val();

          var check_pair = $("#check_pair").val();
          // if(!api_secret){
          //   alert( "ENTER API SECRET");
          // }
          // else if(!api_key){
          //   alert( "ENTER API KEY");
          // }
          // else 
            if(!check_pair){
              alert("Enter check pair")
            }
          else {
            console.log("reqs");
            // $.ajax({
            //   type: "GET",
            //   url: "/check/"+check_pair,
            //   success: success,
            //   dataType: dataType
            // });
            $.get("/check/"+check_pair, function(data){
              console.log(data);
              var line = $("<p>");
              line.html(check_pair+ " === sell="+data[check_pair]["sell"]+ " : buy="+data[check_pair]["buy"])
              $("#output").prepend(line);
            })
          }
        });
        $("#sell_btn").click(function(){
          var api_key = $("#api_key").val();
          
          var api_secret = $("#api_secret").val();

          var check_pair = $("#sell_pair").val();
          var rate = $("#sell_rate").val();
          var amount = $("#sell_amount").val();
          if(!api_secret){
            alert( "ENTER API SECRET");
          }
          else if(!api_key){
            alert( "ENTER API KEY");
          }
          else if(!check_pair){
              alert("Enter sell pair")
            }
          else if(!rate){
            alert("Enter rate")
          }
          else if(!amount){
            alert("Enter amount")
          }
          else {
            console.log("reqs");
            // $.ajax({
            //   type: "GET",
            //   url: "/check/"+check_pair,
            //   success: success,
            //   dataType: dataType
            // });
            data ={
              api_key: api_key,
              api_secret: api_secret,
              rate: rate,
              amount: amount,

            }
            $.post("/sell/"+check_pair, data, function(data){
              console.log(data);
              var line = $("<p>");
              line.html(check_pair+ "sold "+amount+" by "+rate)
              $("#output").prepend(line);
            })
          }
        });
        $("#buy_btn").click(function(){
          var api_key = $("#api_key").val();
          
          var api_secret = $("#api_secret").val();

          var check_pair = $("#buy_pair").val();
          var rate = $("#buy_rate").val();
          var amount = $("#buy_amount").val();
          if(!api_secret){
            alert( "ENTER API SECRET");
          }
          else if(!api_key){
            alert( "ENTER API KEY");
          }
          else if(!check_pair){
              alert("Enter sell pair")
            }
          else if(!rate){
            alert("Enter rate")
          }
          else if(!amount){
            alert("Enter amount")
          }
          else {
            console.log("reqs");
            // $.ajax({
            //   type: "GET",
            //   url: "/check/"+check_pair,
            //   success: success,
            //   dataType: dataType
            // });
            data ={
              api_key: api_key,
              api_secret: api_secret,
              rate: rate,
              amount: amount,

            }
            $.post("/buy/"+check_pair, data, function(data){
              console.log(data);
              var line = $("<p>");
              line.html(check_pair+ "bought "+amount+" by "+rate)
              $("#output").prepend(line);
            })
          }
        })
      })
    </script>


    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script>document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')</script>
    <script src="js/bootstrap.min.js"></script>
  </body>
</html>